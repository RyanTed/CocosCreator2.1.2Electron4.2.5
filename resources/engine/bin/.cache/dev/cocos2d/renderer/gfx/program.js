(function () {
    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
    var __module = nodeEnv ? module : { exports: {} };
    var __filename = 'engine-dev/cocos2d/renderer/gfx/program.js';
    var __require = nodeEnv ? function (request) {
        return require(request);
    } : function (request) {
        return __quick_compile__.require(request, __filename);
    };
    function __define(exports, require, module) {
        if (!nodeEnv) {
            __quick_compile__.registerModule(__filename, module);
        }
                'use strict';
        Object.defineProperty(exports, '__esModule', { value: true });
        var _createClass = function () {
            function defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || false;
                    descriptor.configurable = true;
                    if ('value' in descriptor)
                        descriptor.writable = true;
                    Object.defineProperty(target, descriptor.key, descriptor);
                }
            }
            return function (Constructor, protoProps, staticProps) {
                if (protoProps)
                    defineProperties(Constructor.prototype, protoProps);
                if (staticProps)
                    defineProperties(Constructor, staticProps);
                return Constructor;
            };
        }();
        function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) {
                throw new TypeError('Cannot call a class as a function');
            }
        }
        var _genID = 0;
        function _parseError(out, type, errorLog) {
            errorLog.split('\n').forEach(function (msg) {
                if (msg.length < 5) {
                    return;
                }
                var parts = /^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(msg);
                if (parts) {
                    out.push({
                        type: type,
                        fileID: parts[1] | 0,
                        line: parts[2] | 0,
                        message: parts[3].trim()
                    });
                } else if (msg.length > 0) {
                    out.push({
                        type: type,
                        fileID: -1,
                        line: 0,
                        message: msg
                    });
                }
            });
        }
        var Program = function () {
            function Program(device, options) {
                _classCallCheck(this, Program);
                this._device = device;
                this._attributes = [];
                this._uniforms = [];
                this._samplers = [];
                this._errors = [];
                this._linked = false;
                this._vertSource = options.vert;
                this._fragSource = options.frag;
                this._glID = null;
                this._id = _genID++;
            }
            _createClass(Program, [
                {
                    key: 'link',
                    value: function link() {
                        if (this._linked) {
                            return;
                        }
                        var gl = this._device._gl;
                        var vertShader = _createShader(gl, gl.VERTEX_SHADER, this._vertSource);
                        var fragShader = _createShader(gl, gl.FRAGMENT_SHADER, this._fragSource);
                        var program = gl.createProgram();
                        gl.attachShader(program, vertShader);
                        gl.attachShader(program, fragShader);
                        gl.linkProgram(program);
                        var failed = false;
                        var errors = this._errors;
                        if (!gl.getShaderParameter(vertShader, gl.COMPILE_STATUS)) {
                            _parseError(errors, 'vs', gl.getShaderInfoLog(vertShader));
                            failed = true;
                        }
                        if (!gl.getShaderParameter(fragShader, gl.COMPILE_STATUS)) {
                            _parseError(errors, 'fs', gl.getShaderInfoLog(fragShader));
                            failed = true;
                        }
                        gl.deleteShader(vertShader);
                        gl.deleteShader(fragShader);
                        if (failed) {
                            return errors;
                        }
                        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
                            errors.push({ info: 'Failed to link shader program: ' + gl.getProgramInfoLog(program) });
                            return errors;
                        }
                        this._glID = program;
                        var numAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);
                        for (var i = 0; i < numAttributes; ++i) {
                            var info = gl.getActiveAttrib(program, i);
                            var location = gl.getAttribLocation(program, info.name);
                            this._attributes.push({
                                name: info.name,
                                location: location,
                                type: info.type
                            });
                        }
                        var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);
                        for (var _i = 0; _i < numUniforms; ++_i) {
                            var _info = gl.getActiveUniform(program, _i);
                            var name = _info.name;
                            var _location = gl.getUniformLocation(program, name);
                            var isArray = name.substr(name.length - 3) === '[0]';
                            if (isArray) {
                                name = name.substr(0, name.length - 3);
                            }
                            var uniform = {
                                name: name,
                                location: _location,
                                type: _info.type,
                                size: isArray ? _info.size : undefined
                            };
                            this._uniforms.push(uniform);
                        }
                        this._linked = true;
                    }
                },
                {
                    key: 'destroy',
                    value: function destroy() {
                        var gl = this._device._gl;
                        gl.deleteProgram(this._glID);
                        this._linked = false;
                        this._glID = null;
                        this._attributes = [];
                        this._uniforms = [];
                        this._samplers = [];
                    }
                },
                {
                    key: 'id',
                    get: function get() {
                        return this._id;
                    }
                }
            ]);
            return Program;
        }();
        exports.default = Program;
        function _createShader(gl, type, src) {
            var shader = gl.createShader(type);
            gl.shaderSource(shader, src);
            gl.compileShader(shader);
            return shader;
        }
        module.exports = exports['default'];
    }
    if (nodeEnv) {
        __define(__module.exports, __require, __module);
    } else {
        __quick_compile__.registerModuleFunc(__filename, function () {
            __define(__module.exports, __require, __module);
        });
    }
}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2dyYW0uanMiLCJDOi9Vc2Vycy9uYW50YXMvZmlyZWJhbGwteC9mYl8yMS1yZWxlYXNlL2VuZ2luZS9jb2NvczJkL3JlbmRlcmVyL2dmeC9wcm9ncmFtLmpzIl0sIm5hbWVzIjpbIl9nZW5JRCIsIl9wYXJzZUVycm9yIiwib3V0IiwidHlwZSIsImVycm9yTG9nIiwic3BsaXQiLCJmb3JFYWNoIiwibXNnIiwibGVuZ3RoIiwicGFydHMiLCJleGVjIiwicHVzaCIsImZpbGVJRCIsImxpbmUiLCJtZXNzYWdlIiwidHJpbSIsIlByb2dyYW0iLCJkZXZpY2UiLCJvcHRpb25zIiwiX2RldmljZSIsIl9hdHRyaWJ1dGVzIiwiX3VuaWZvcm1zIiwiX3NhbXBsZXJzIiwiX2Vycm9ycyIsIl9saW5rZWQiLCJfdmVydFNvdXJjZSIsInZlcnQiLCJfZnJhZ1NvdXJjZSIsImZyYWciLCJfZ2xJRCIsIl9pZCIsImdsIiwiX2dsIiwidmVydFNoYWRlciIsIl9jcmVhdGVTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiZnJhZ1NoYWRlciIsIkZSQUdNRU5UX1NIQURFUiIsInByb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJmYWlsZWQiLCJlcnJvcnMiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJkZWxldGVTaGFkZXIiLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJpbmZvIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJudW1BdHRyaWJ1dGVzIiwiQUNUSVZFX0FUVFJJQlVURVMiLCJpIiwiZ2V0QWN0aXZlQXR0cmliIiwibG9jYXRpb24iLCJnZXRBdHRyaWJMb2NhdGlvbiIsIm5hbWUiLCJudW1Vbmlmb3JtcyIsIkFDVElWRV9VTklGT1JNUyIsImdldEFjdGl2ZVVuaWZvcm0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJpc0FycmF5Iiwic3Vic3RyIiwidW5pZm9ybSIsInNpemUiLCJ1bmRlZmluZWQiLCJkZWxldGVQcm9ncmFtIiwic3JjIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwic2hhZGVyU291cmNlIiwiY29tcGlsZVNoYWRlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0lBQUEsU0FBQSxRQUFBLENBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUE7QUFBQTs7U0FBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztRQUFBLElBQUlBLE1BQUFBLEdBQVMsQ0FBYjtRQUVBLFNBQVNDLFdBQVQsQ0FBcUJDLEdBQXJCLEVBQTBCQyxJQUExQixFQUFnQ0MsUUFBaEMsRUFBMEM7QUFBQSxZQUN4Q0EsUUFBQUEsQ0FBU0MsS0FBVEQsQ0FBZSxJQUFmQSxFQUFxQkUsT0FBckJGLENBQTZCLFVBQUEsR0FBQSxFQUFPO0FBQUEsZ0JBQ2xDLElBQUlHLEdBQUFBLENBQUlDLE1BQUpELEdBQWEsQ0FBakIsRUFBb0I7QUFBQSxvQkFDbEIsT0FEa0I7QUFBQSxpQkFEYztBQUFBLGdCQUtsQyxJQUFJRSxLQUFBQSxHQUFRLGlDQUFpQ0MsSUFBakMsQ0FBc0NILEdBQXRDLENBQVosQ0FMa0M7QUFBQSxnQkFNbEMsSUFBSUUsS0FBSixFQUFXO0FBQUEsb0JBQ1RQLEdBQUFBLENBQUlTLElBQUpULENBQVM7QUFBQSx3QkFDUEMsSUFBQUEsRUFBTUEsSUFEQztBQUFBLHdCQUVQUyxNQUFBQSxFQUFRSCxLQUFBQSxDQUFNLENBQU5BLElBQVcsQ0FGWjtBQUFBLHdCQUdQSSxJQUFBQSxFQUFNSixLQUFBQSxDQUFNLENBQU5BLElBQVcsQ0FIVjtBQUFBLHdCQUlQSyxPQUFBQSxFQUFTTCxLQUFBQSxDQUFNLENBQU5BLEVBQVNNLElBQVROLEVBSkY7QUFBQSxxQkFBVFAsRUFEUztBQUFBLGlCQUFYLE1BT08sSUFBSUssR0FBQUEsQ0FBSUMsTUFBSkQsR0FBYSxDQUFqQixFQUFvQjtBQUFBLG9CQUN6QkwsR0FBQUEsQ0FBSVMsSUFBSlQsQ0FBUztBQUFBLHdCQUNQQyxJQUFBQSxFQUFNQSxJQURDO0FBQUEsd0JBRVBTLE1BQUFBLEVBQVEsQ0FBQyxDQUZGO0FBQUEsd0JBR1BDLElBQUFBLEVBQU0sQ0FIQztBQUFBLHdCQUlQQyxPQUFBQSxFQUFTUCxHQUpGO0FBQUEscUJBQVRMLEVBRHlCO0FBQUEsaUJBYk87QUFBQSxhQUFwQ0UsRUFEd0M7QUFBQTtZQXlCckJZLE9BQUFBO1lBc0JuQixTQUFBLE9BQUEsQ0FBWUMsTUFBWixFQUFvQkMsT0FBcEIsRUFBNkI7QUFBQSxnQkFBQSxlQUFBLENBQUEsSUFBQSxFQUFBLE9BQUEsRUFBQTtBQUFBLGdCQUMzQixLQUFLQyxPQUFMLEdBQWVGLE1BQWYsQ0FEMkI7QUFBQSxnQkFJM0IsS0FBS0csV0FBTCxHQUFtQixFQUFuQixDQUoyQjtBQUFBLGdCQUszQixLQUFLQyxTQUFMLEdBQWlCLEVBQWpCLENBTDJCO0FBQUEsZ0JBTTNCLEtBQUtDLFNBQUwsR0FBaUIsRUFBakIsQ0FOMkI7QUFBQSxnQkFPM0IsS0FBS0MsT0FBTCxHQUFlLEVBQWYsQ0FQMkI7QUFBQSxnQkFRM0IsS0FBS0MsT0FBTCxHQUFlLEtBQWYsQ0FSMkI7QUFBQSxnQkFTM0IsS0FBS0MsV0FBTCxHQUFtQlAsT0FBQUEsQ0FBUVEsSUFBM0IsQ0FUMkI7QUFBQSxnQkFVM0IsS0FBS0MsV0FBTCxHQUFtQlQsT0FBQUEsQ0FBUVUsSUFBM0IsQ0FWMkI7QUFBQSxnQkFXM0IsS0FBS0MsS0FBTCxHQUFhLElBQWIsQ0FYMkI7QUFBQSxnQkFZM0IsS0FBS0MsR0FBTCxHQUFXOUIsTUFBQUEsRUFBWCxDQVoyQjtBQUFBOzs7OzJDQW1CdEI7QUFBQSx3QkFDTCxJQUFJLEtBQUt3QixPQUFULEVBQWtCO0FBQUEsNEJBQ2hCLE9BRGdCO0FBQUEseUJBRGI7QUFBQSx3QkFLTCxJQUFJTyxFQUFBQSxHQUFLLEtBQUtaLE9BQUwsQ0FBYWEsR0FBdEIsQ0FMSztBQUFBLHdCQU9MLElBQUlDLFVBQUFBLEdBQWFDLGFBQUFBLENBQWNILEVBQWRHLEVBQWtCSCxFQUFBQSxDQUFHSSxhQUFyQkQsRUFBb0MsS0FBS1QsV0FBekNTLENBQWpCLENBUEs7QUFBQSx3QkFRTCxJQUFJRSxVQUFBQSxHQUFhRixhQUFBQSxDQUFjSCxFQUFkRyxFQUFrQkgsRUFBQUEsQ0FBR00sZUFBckJILEVBQXNDLEtBQUtQLFdBQTNDTyxDQUFqQixDQVJLO0FBQUEsd0JBVUwsSUFBSUksT0FBQUEsR0FBVVAsRUFBQUEsQ0FBR1EsYUFBSFIsRUFBZCxDQVZLO0FBQUEsd0JBV0xBLEVBQUFBLENBQUdTLFlBQUhULENBQWdCTyxPQUFoQlAsRUFBeUJFLFVBQXpCRixFQVhLO0FBQUEsd0JBWUxBLEVBQUFBLENBQUdTLFlBQUhULENBQWdCTyxPQUFoQlAsRUFBeUJLLFVBQXpCTCxFQVpLO0FBQUEsd0JBYUxBLEVBQUFBLENBQUdVLFdBQUhWLENBQWVPLE9BQWZQLEVBYks7QUFBQSx3QkFlTCxJQUFJVyxNQUFBQSxHQUFTLEtBQWIsQ0FmSztBQUFBLHdCQWdCTCxJQUFJQyxNQUFBQSxHQUFTLEtBQUtwQixPQUFsQixDQWhCSztBQUFBLHdCQWtCTCxJQUFJLENBQUNRLEVBQUFBLENBQUdhLGtCQUFIYixDQUFzQkUsVUFBdEJGLEVBQWtDQSxFQUFBQSxDQUFHYyxjQUFyQ2QsQ0FBTCxFQUEyRDtBQUFBLDRCQUN6RDlCLFdBQUFBLENBQVkwQyxNQUFaMUMsRUFBb0IsSUFBcEJBLEVBQTBCOEIsRUFBQUEsQ0FBR2UsZ0JBQUhmLENBQW9CRSxVQUFwQkYsQ0FBMUI5QixFQUR5RDtBQUFBLDRCQUV6RHlDLE1BQUFBLEdBQVMsSUFBVEEsQ0FGeUQ7QUFBQSx5QkFsQnREO0FBQUEsd0JBdUJMLElBQUksQ0FBQ1gsRUFBQUEsQ0FBR2Esa0JBQUhiLENBQXNCSyxVQUF0QkwsRUFBa0NBLEVBQUFBLENBQUdjLGNBQXJDZCxDQUFMLEVBQTJEO0FBQUEsNEJBQ3pEOUIsV0FBQUEsQ0FBWTBDLE1BQVoxQyxFQUFvQixJQUFwQkEsRUFBMEI4QixFQUFBQSxDQUFHZSxnQkFBSGYsQ0FBb0JLLFVBQXBCTCxDQUExQjlCLEVBRHlEO0FBQUEsNEJBRXpEeUMsTUFBQUEsR0FBUyxJQUFUQSxDQUZ5RDtBQUFBLHlCQXZCdEQ7QUFBQSx3QkE0QkxYLEVBQUFBLENBQUdnQixZQUFIaEIsQ0FBZ0JFLFVBQWhCRixFQTVCSztBQUFBLHdCQTZCTEEsRUFBQUEsQ0FBR2dCLFlBQUhoQixDQUFnQkssVUFBaEJMLEVBN0JLO0FBQUEsd0JBK0JMLElBQUlXLE1BQUosRUFBWTtBQUFBLDRCQUNWLE9BQU9DLE1BQVAsQ0FEVTtBQUFBLHlCQS9CUDtBQUFBLHdCQW1DTCxJQUFJLENBQUNaLEVBQUFBLENBQUdpQixtQkFBSGpCLENBQXVCTyxPQUF2QlAsRUFBZ0NBLEVBQUFBLENBQUdrQixXQUFuQ2xCLENBQUwsRUFBc0Q7QUFBQSw0QkFDcERZLE1BQUFBLENBQU9oQyxJQUFQZ0MsQ0FBWSxFQUFDTyxJQUFBQSxFQUFBQSxvQ0FBd0NuQixFQUFBQSxDQUFHb0IsaUJBQUhwQixDQUFxQk8sT0FBckJQLENBQXpDLEVBQVpZLEVBRG9EO0FBQUEsNEJBRXBELE9BQU9BLE1BQVAsQ0FGb0Q7QUFBQSx5QkFuQ2pEO0FBQUEsd0JBd0NMLEtBQUtkLEtBQUwsR0FBYVMsT0FBYixDQXhDSztBQUFBLHdCQTJDTCxJQUFJYyxhQUFBQSxHQUFnQnJCLEVBQUFBLENBQUdpQixtQkFBSGpCLENBQXVCTyxPQUF2QlAsRUFBZ0NBLEVBQUFBLENBQUdzQixpQkFBbkN0QixDQUFwQixDQTNDSztBQUFBLHdCQTRDTCxLQUFLLElBQUl1QixDQUFBQSxHQUFJLENBQVIsQ0FBTCxDQUFnQkEsQ0FBQUEsR0FBSUYsYUFBcEIsRUFBbUMsRUFBRUUsQ0FBckMsRUFBd0M7QUFBQSw0QkFDdEMsSUFBSUosSUFBQUEsR0FBT25CLEVBQUFBLENBQUd3QixlQUFIeEIsQ0FBbUJPLE9BQW5CUCxFQUE0QnVCLENBQTVCdkIsQ0FBWCxDQURzQztBQUFBLDRCQUV0QyxJQUFJeUIsUUFBQUEsR0FBV3pCLEVBQUFBLENBQUcwQixpQkFBSDFCLENBQXFCTyxPQUFyQlAsRUFBOEJtQixJQUFBQSxDQUFLUSxJQUFuQzNCLENBQWYsQ0FGc0M7QUFBQSw0QkFJdEMsS0FBS1gsV0FBTCxDQUFpQlQsSUFBakIsQ0FBc0I7QUFBQSxnQ0FDcEIrQyxJQUFBQSxFQUFNUixJQUFBQSxDQUFLUSxJQURTO0FBQUEsZ0NBRXBCRixRQUFBQSxFQUFVQSxRQUZVO0FBQUEsZ0NBR3BCckQsSUFBQUEsRUFBTStDLElBQUFBLENBQUsvQyxJQUhTO0FBQUEsNkJBQXRCLEVBSnNDO0FBQUEseUJBNUNuQztBQUFBLHdCQXdETCxJQUFJd0QsV0FBQUEsR0FBYzVCLEVBQUFBLENBQUdpQixtQkFBSGpCLENBQXVCTyxPQUF2QlAsRUFBZ0NBLEVBQUFBLENBQUc2QixlQUFuQzdCLENBQWxCLENBeERLO0FBQUEsd0JBeURMLEtBQUssSUFBSXVCLEVBQUFBLEdBQUksQ0FBUixDQUFMLENBQWdCQSxFQUFBQSxHQUFJSyxXQUFwQixFQUFpQyxFQUFFTCxFQUFuQyxFQUFzQztBQUFBLDRCQUNwQyxJQUFJSixLQUFBQSxHQUFPbkIsRUFBQUEsQ0FBRzhCLGdCQUFIOUIsQ0FBb0JPLE9BQXBCUCxFQUE2QnVCLEVBQTdCdkIsQ0FBWCxDQURvQztBQUFBLDRCQUVwQyxJQUFJMkIsSUFBQUEsR0FBT1IsS0FBQUEsQ0FBS1EsSUFBaEIsQ0FGb0M7QUFBQSw0QkFHcEMsSUFBSUYsU0FBQUEsR0FBV3pCLEVBQUFBLENBQUcrQixrQkFBSC9CLENBQXNCTyxPQUF0QlAsRUFBK0IyQixJQUEvQjNCLENBQWYsQ0FIb0M7QUFBQSw0QkFJcEMsSUFBSWdDLE9BQUFBLEdBQVVMLElBQUFBLENBQUtNLE1BQUxOLENBQVlBLElBQUFBLENBQUtsRCxNQUFMa0QsR0FBYyxDQUExQkEsTUFBaUMsS0FBL0MsQ0FKb0M7QUFBQSw0QkFLcEMsSUFBSUssT0FBSixFQUFhO0FBQUEsZ0NBQ1hMLElBQUFBLEdBQU9BLElBQUFBLENBQUtNLE1BQUxOLENBQVksQ0FBWkEsRUFBZUEsSUFBQUEsQ0FBS2xELE1BQUxrRCxHQUFjLENBQTdCQSxDQUFQQSxDQURXO0FBQUEsNkJBTHVCO0FBQUEsNEJBU3BDLElBQUlPLE9BQUFBLEdBQVU7QUFBQSxnQ0FDWlAsSUFBQUEsRUFBTUEsSUFETTtBQUFBLGdDQUVaRixRQUFBQSxFQUFVQSxTQUZFO0FBQUEsZ0NBR1pyRCxJQUFBQSxFQUFNK0MsS0FBQUEsQ0FBSy9DLElBSEM7QUFBQSxnQ0FJWitELElBQUFBLEVBQU1ILE9BQUFBLEdBQVViLEtBQUFBLENBQUtnQixJQUFmSCxHQUFzQkksU0FKaEI7QUFBQSw2QkFBZCxDQVRvQztBQUFBLDRCQWVwQyxLQUFLOUMsU0FBTCxDQUFlVixJQUFmLENBQW9Cc0QsT0FBcEIsRUFmb0M7QUFBQSx5QkF6RGpDO0FBQUEsd0JBMkVMLEtBQUt6QyxPQUFMLEdBQWUsSUFBZixDQTNFSztBQUFBOzs7OzhDQThFRztBQUFBLHdCQUNSLElBQUlPLEVBQUFBLEdBQUssS0FBS1osT0FBTCxDQUFhYSxHQUF0QixDQURRO0FBQUEsd0JBRVJELEVBQUFBLENBQUdxQyxhQUFIckMsQ0FBaUIsS0FBS0YsS0FBdEJFLEVBRlE7QUFBQSx3QkFJUixLQUFLUCxPQUFMLEdBQWUsS0FBZixDQUpRO0FBQUEsd0JBS1IsS0FBS0ssS0FBTCxHQUFhLElBQWIsQ0FMUTtBQUFBLHdCQU1SLEtBQUtULFdBQUwsR0FBbUIsRUFBbkIsQ0FOUTtBQUFBLHdCQU9SLEtBQUtDLFNBQUwsR0FBaUIsRUFBakIsQ0FQUTtBQUFBLHdCQVFSLEtBQUtDLFNBQUwsR0FBaUIsRUFBakIsQ0FSUTtBQUFBOzs7O3dDQWxGRDtBQUFBLHdCQUNQLE9BQU8sS0FBS1EsR0FBWixDQURPO0FBQUE7Ozs7OzBCQXJDVWQ7UUF1SXJCLFNBQVNrQixhQUFULENBQXVCSCxFQUF2QixFQUEyQjVCLElBQTNCLEVBQWlDa0UsR0FBakMsRUFBc0M7QUFBQSxZQUNwQyxJQUFJQyxNQUFBQSxHQUFTdkMsRUFBQUEsQ0FBR3dDLFlBQUh4QyxDQUFnQjVCLElBQWhCNEIsQ0FBYixDQURvQztBQUFBLFlBRXBDQSxFQUFBQSxDQUFHeUMsWUFBSHpDLENBQWdCdUMsTUFBaEJ2QyxFQUF3QnNDLEdBQXhCdEMsRUFGb0M7QUFBQSxZQUdwQ0EsRUFBQUEsQ0FBRzBDLGFBQUgxQyxDQUFpQnVDLE1BQWpCdkMsRUFIb0M7QUFBQSxZQUtwQyxPQUFPdUMsTUFBUCxDQUxvQztBQUFBOzRDQWxLdEM7QUFBQTtJQUdpQixJQUFNaEUsT0FBTixFQUFjO0FBQUEsUUFDUCxRQUFBLENBQUEsUUFBQSxDQUFBLE9BQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQURPO0FBQUEsS0FBZCxNQUdaO0FBQUE7WUFFVyxRQUFBLENBQUEsUUFBQSxDQUFBLE9BQUEsRUFBc0NDLFNBQXRDLEVBQVosUUFBWTtXQUZYO0FBQUEiLCJmaWxlIjoicHJvZ3JhbS5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBfZ2VuSUQgPSAwO1xyXG5cclxuZnVuY3Rpb24gX3BhcnNlRXJyb3Iob3V0LCB0eXBlLCBlcnJvckxvZykge1xyXG4gIGVycm9yTG9nLnNwbGl0KCdcXG4nKS5mb3JFYWNoKG1zZyA9PiB7XHJcbiAgICBpZiAobXNnLmxlbmd0aCA8IDUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwYXJ0cyA9IC9eRVJST1I6XFxzKyhcXGQrKTooXFxkKyk6XFxzKiguKikkLy5leGVjKG1zZyk7XHJcbiAgICBpZiAocGFydHMpIHtcclxuICAgICAgb3V0LnB1c2goe1xyXG4gICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgZmlsZUlEOiBwYXJ0c1sxXSB8IDAsXHJcbiAgICAgICAgbGluZTogcGFydHNbMl0gfCAwLFxyXG4gICAgICAgIG1lc3NhZ2U6IHBhcnRzWzNdLnRyaW0oKVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIGlmIChtc2cubGVuZ3RoID4gMCkge1xyXG4gICAgICBvdXQucHVzaCh7XHJcbiAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICBmaWxlSUQ6IC0xLFxyXG4gICAgICAgIGxpbmU6IDAsXHJcbiAgICAgICAgbWVzc2FnZTogbXNnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9ncmFtIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge2VmLkdyYXBoaWNzRGV2aWNlfSBkZXZpY2UgLSBncmFwaGljIGRldmljZVxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gc2hhZGVyIGRlZmluaXRpb25cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy52ZXJ0IC0gdmVydGV4IHNoYWRlciBzb3VyY2UgY29kZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmZyYWcgLSBmcmFnbWVudCBzaGFkZXIgc2hhZGVyIHNvdXJjZSBjb2RlXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiBsZXQgcHJvZyA9IG5ldyBQcm9ncmFtKGRldmljZSwge1xyXG4gICAqICAgdmVydDogYFxyXG4gICAqICAgICBhdHRyaWJ1dGUgdmVjMyBhX3Bvc2l0aW9uO1xyXG4gICAqICAgICB2b2lkIG1haW4oKSB7XHJcbiAgICogICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCBhX3Bvc2l0aW9uLCAxLjAgKTtcclxuICAgKiAgICAgfVxyXG4gICAqICAgYCxcclxuICAgKiAgIGZyYWc6IGBcclxuICAgKiAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcbiAgICogICAgIHZvaWQgbWFpbigpIHtcclxuICAgKiAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDEuMCwgMS4wLCAxLjAgKTtcclxuICAgKiAgICAgfVxyXG4gICAqICAgYFxyXG4gICAqIH0pO1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKGRldmljZSwgb3B0aW9ucykge1xyXG4gICAgdGhpcy5fZGV2aWNlID0gZGV2aWNlO1xyXG5cclxuICAgIC8vIHN0b3JlcyBnbCBpbmZvcm1hdGlvbjogeyBsb2NhdGlvbiwgdHlwZSB9XHJcbiAgICB0aGlzLl9hdHRyaWJ1dGVzID0gW107XHJcbiAgICB0aGlzLl91bmlmb3JtcyA9IFtdO1xyXG4gICAgdGhpcy5fc2FtcGxlcnMgPSBbXTtcclxuICAgIHRoaXMuX2Vycm9ycyA9IFtdO1xyXG4gICAgdGhpcy5fbGlua2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLl92ZXJ0U291cmNlID0gb3B0aW9ucy52ZXJ0O1xyXG4gICAgdGhpcy5fZnJhZ1NvdXJjZSA9IG9wdGlvbnMuZnJhZztcclxuICAgIHRoaXMuX2dsSUQgPSBudWxsO1xyXG4gICAgdGhpcy5faWQgPSBfZ2VuSUQrKztcclxuICB9XHJcblxyXG4gIGdldCBpZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIGxpbmsoKSB7XHJcbiAgICBpZiAodGhpcy5fbGlua2VkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ2wgPSB0aGlzLl9kZXZpY2UuX2dsO1xyXG5cclxuICAgIGxldCB2ZXJ0U2hhZGVyID0gX2NyZWF0ZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdGhpcy5fdmVydFNvdXJjZSk7XHJcbiAgICBsZXQgZnJhZ1NoYWRlciA9IF9jcmVhdGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgdGhpcy5fZnJhZ1NvdXJjZSk7XHJcblxyXG4gICAgbGV0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydFNoYWRlcik7XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ1NoYWRlcik7XHJcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgICBsZXQgZmFpbGVkID0gZmFsc2U7XHJcbiAgICBsZXQgZXJyb3JzID0gdGhpcy5fZXJyb3JzO1xyXG5cclxuICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHZlcnRTaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xyXG4gICAgICBfcGFyc2VFcnJvcihlcnJvcnMsICd2cycsIGdsLmdldFNoYWRlckluZm9Mb2codmVydFNoYWRlcikpO1xyXG4gICAgICBmYWlsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGZyYWdTaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xyXG4gICAgICBfcGFyc2VFcnJvcihlcnJvcnMsICdmcycsIGdsLmdldFNoYWRlckluZm9Mb2coZnJhZ1NoYWRlcikpO1xyXG4gICAgICBmYWlsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdsLmRlbGV0ZVNoYWRlcih2ZXJ0U2hhZGVyKTtcclxuICAgIGdsLmRlbGV0ZVNoYWRlcihmcmFnU2hhZGVyKTtcclxuXHJcbiAgICBpZiAoZmFpbGVkKSB7XHJcbiAgICAgIHJldHVybiBlcnJvcnM7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xyXG4gICAgICBlcnJvcnMucHVzaCh7aW5mbzogYEZhaWxlZCB0byBsaW5rIHNoYWRlciBwcm9ncmFtOiAke2dsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pfWB9KTtcclxuICAgICAgcmV0dXJuIGVycm9ycztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9nbElEID0gcHJvZ3JhbTtcclxuXHJcbiAgICAvLyBwYXJzZSBhdHRyaWJ1dGVcclxuICAgIGxldCBudW1BdHRyaWJ1dGVzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5BQ1RJVkVfQVRUUklCVVRFUyk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUF0dHJpYnV0ZXM7ICsraSkge1xyXG4gICAgICBsZXQgaW5mbyA9IGdsLmdldEFjdGl2ZUF0dHJpYihwcm9ncmFtLCBpKTtcclxuICAgICAgbGV0IGxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgaW5mby5uYW1lKTtcclxuXHJcbiAgICAgIHRoaXMuX2F0dHJpYnV0ZXMucHVzaCh7XHJcbiAgICAgICAgbmFtZTogaW5mby5uYW1lLFxyXG4gICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcclxuICAgICAgICB0eXBlOiBpbmZvLnR5cGUsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHBhcnNlIHVuaWZvcm1cclxuICAgIGxldCBudW1Vbmlmb3JtcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuQUNUSVZFX1VOSUZPUk1TKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVW5pZm9ybXM7ICsraSkge1xyXG4gICAgICBsZXQgaW5mbyA9IGdsLmdldEFjdGl2ZVVuaWZvcm0ocHJvZ3JhbSwgaSk7XHJcbiAgICAgIGxldCBuYW1lID0gaW5mby5uYW1lO1xyXG4gICAgICBsZXQgbG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgbmFtZSk7XHJcbiAgICAgIGxldCBpc0FycmF5ID0gbmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSAzKSA9PT0gJ1swXSc7XHJcbiAgICAgIGlmIChpc0FycmF5KSB7XHJcbiAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gMyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB1bmlmb3JtID0ge1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxyXG4gICAgICAgIHR5cGU6IGluZm8udHlwZSxcclxuICAgICAgICBzaXplOiBpc0FycmF5ID8gaW5mby5zaXplIDogdW5kZWZpbmVkLCAvLyB1c2VkIHdoZW4gdW5pZm9ybSBpcyBhbiBhcnJheVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLl91bmlmb3Jtcy5wdXNoKHVuaWZvcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2xpbmtlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95KCkge1xyXG4gICAgbGV0IGdsID0gdGhpcy5fZGV2aWNlLl9nbDtcclxuICAgIGdsLmRlbGV0ZVByb2dyYW0odGhpcy5fZ2xJRCk7XHJcblxyXG4gICAgdGhpcy5fbGlua2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLl9nbElEID0gbnVsbDtcclxuICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSBbXTtcclxuICAgIHRoaXMuX3VuaWZvcm1zID0gW107XHJcbiAgICB0aGlzLl9zYW1wbGVycyA9IFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT1cclxuLy8gaW50ZXJuYWxcclxuLy8gPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmZ1bmN0aW9uIF9jcmVhdGVTaGFkZXIoZ2wsIHR5cGUsIHNyYykge1xyXG4gIGxldCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcclxuICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcblxyXG4gIHJldHVybiBzaGFkZXI7XHJcbn0iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBfZ2VuSUQgPSAwO1xuXG5mdW5jdGlvbiBfcGFyc2VFcnJvcihvdXQsIHR5cGUsIGVycm9yTG9nKSB7XG4gIGVycm9yTG9nLnNwbGl0KCdcXG4nKS5mb3JFYWNoKGZ1bmN0aW9uIChtc2cpIHtcbiAgICBpZiAobXNnLmxlbmd0aCA8IDUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcGFydHMgPSAvXkVSUk9SOlxccysoXFxkKyk6KFxcZCspOlxccyooLiopJC8uZXhlYyhtc2cpO1xuICAgIGlmIChwYXJ0cykge1xuICAgICAgb3V0LnB1c2goe1xuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBmaWxlSUQ6IHBhcnRzWzFdIHwgMCxcbiAgICAgICAgbGluZTogcGFydHNbMl0gfCAwLFxuICAgICAgICBtZXNzYWdlOiBwYXJ0c1szXS50cmltKClcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAobXNnLmxlbmd0aCA+IDApIHtcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgZmlsZUlEOiAtMSxcbiAgICAgICAgbGluZTogMCxcbiAgICAgICAgbWVzc2FnZTogbXNnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG52YXIgUHJvZ3JhbSA9IGZ1bmN0aW9uICgpIHtcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtlZi5HcmFwaGljc0RldmljZX0gZGV2aWNlIC0gZ3JhcGhpYyBkZXZpY2VcclxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIHNoYWRlciBkZWZpbml0aW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudmVydCAtIHZlcnRleCBzaGFkZXIgc291cmNlIGNvZGVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5mcmFnIC0gZnJhZ21lbnQgc2hhZGVyIHNoYWRlciBzb3VyY2UgY29kZVxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogbGV0IHByb2cgPSBuZXcgUHJvZ3JhbShkZXZpY2UsIHtcclxuICAgKiAgIHZlcnQ6IGBcclxuICAgKiAgICAgYXR0cmlidXRlIHZlYzMgYV9wb3NpdGlvbjtcclxuICAgKiAgICAgdm9pZCBtYWluKCkge1xyXG4gICAqICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNCggYV9wb3NpdGlvbiwgMS4wICk7XHJcbiAgICogICAgIH1cclxuICAgKiAgIGAsXHJcbiAgICogICBmcmFnOiBgXHJcbiAgICogICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG4gICAqICAgICB2b2lkIG1haW4oKSB7XHJcbiAgICogICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCggMS4wLCAxLjAsIDEuMCwgMS4wICk7XHJcbiAgICogICAgIH1cclxuICAgKiAgIGBcclxuICAgKiB9KTtcclxuICAgKi9cbiAgZnVuY3Rpb24gUHJvZ3JhbShkZXZpY2UsIG9wdGlvbnMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZ3JhbSk7XG5cbiAgICB0aGlzLl9kZXZpY2UgPSBkZXZpY2U7XG5cbiAgICAvLyBzdG9yZXMgZ2wgaW5mb3JtYXRpb246IHsgbG9jYXRpb24sIHR5cGUgfVxuICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSBbXTtcbiAgICB0aGlzLl91bmlmb3JtcyA9IFtdO1xuICAgIHRoaXMuX3NhbXBsZXJzID0gW107XG4gICAgdGhpcy5fZXJyb3JzID0gW107XG4gICAgdGhpcy5fbGlua2VkID0gZmFsc2U7XG4gICAgdGhpcy5fdmVydFNvdXJjZSA9IG9wdGlvbnMudmVydDtcbiAgICB0aGlzLl9mcmFnU291cmNlID0gb3B0aW9ucy5mcmFnO1xuICAgIHRoaXMuX2dsSUQgPSBudWxsO1xuICAgIHRoaXMuX2lkID0gX2dlbklEKys7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvZ3JhbSwgW3tcbiAgICBrZXk6ICdsaW5rJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGluaygpIHtcbiAgICAgIGlmICh0aGlzLl9saW5rZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZ2wgPSB0aGlzLl9kZXZpY2UuX2dsO1xuXG4gICAgICB2YXIgdmVydFNoYWRlciA9IF9jcmVhdGVTaGFkZXIoZ2wsIGdsLlZFUlRFWF9TSEFERVIsIHRoaXMuX3ZlcnRTb3VyY2UpO1xuICAgICAgdmFyIGZyYWdTaGFkZXIgPSBfY3JlYXRlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIHRoaXMuX2ZyYWdTb3VyY2UpO1xuXG4gICAgICB2YXIgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0U2hhZGVyKTtcbiAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnU2hhZGVyKTtcbiAgICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgICB2YXIgZmFpbGVkID0gZmFsc2U7XG4gICAgICB2YXIgZXJyb3JzID0gdGhpcy5fZXJyb3JzO1xuXG4gICAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcih2ZXJ0U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgX3BhcnNlRXJyb3IoZXJyb3JzLCAndnMnLCBnbC5nZXRTaGFkZXJJbmZvTG9nKHZlcnRTaGFkZXIpKTtcbiAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoZnJhZ1NoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICAgIF9wYXJzZUVycm9yKGVycm9ycywgJ2ZzJywgZ2wuZ2V0U2hhZGVySW5mb0xvZyhmcmFnU2hhZGVyKSk7XG4gICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGdsLmRlbGV0ZVNoYWRlcih2ZXJ0U2hhZGVyKTtcbiAgICAgIGdsLmRlbGV0ZVNoYWRlcihmcmFnU2hhZGVyKTtcblxuICAgICAgaWYgKGZhaWxlZCkge1xuICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKHsgaW5mbzogJ0ZhaWxlZCB0byBsaW5rIHNoYWRlciBwcm9ncmFtOiAnICsgZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkgfSk7XG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2dsSUQgPSBwcm9ncmFtO1xuXG4gICAgICAvLyBwYXJzZSBhdHRyaWJ1dGVcbiAgICAgIHZhciBudW1BdHRyaWJ1dGVzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5BQ1RJVkVfQVRUUklCVVRFUyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUF0dHJpYnV0ZXM7ICsraSkge1xuICAgICAgICB2YXIgaW5mbyA9IGdsLmdldEFjdGl2ZUF0dHJpYihwcm9ncmFtLCBpKTtcbiAgICAgICAgdmFyIGxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgaW5mby5uYW1lKTtcblxuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGluZm8ubmFtZSxcbiAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgICAgdHlwZTogaW5mby50eXBlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBwYXJzZSB1bmlmb3JtXG4gICAgICB2YXIgbnVtVW5pZm9ybXMgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkFDVElWRV9VTklGT1JNUyk7XG4gICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbnVtVW5pZm9ybXM7ICsrX2kpIHtcbiAgICAgICAgdmFyIF9pbmZvID0gZ2wuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBfaSk7XG4gICAgICAgIHZhciBuYW1lID0gX2luZm8ubmFtZTtcbiAgICAgICAgdmFyIF9sb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBuYW1lKTtcbiAgICAgICAgdmFyIGlzQXJyYXkgPSBuYW1lLnN1YnN0cihuYW1lLmxlbmd0aCAtIDMpID09PSAnWzBdJztcbiAgICAgICAgaWYgKGlzQXJyYXkpIHtcbiAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSAzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB1bmlmb3JtID0ge1xuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgbG9jYXRpb246IF9sb2NhdGlvbixcbiAgICAgICAgICB0eXBlOiBfaW5mby50eXBlLFxuICAgICAgICAgIHNpemU6IGlzQXJyYXkgPyBfaW5mby5zaXplIDogdW5kZWZpbmVkIH07XG4gICAgICAgIHRoaXMuX3VuaWZvcm1zLnB1c2godW5pZm9ybSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2xpbmtlZCA9IHRydWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGVzdHJveScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICB2YXIgZ2wgPSB0aGlzLl9kZXZpY2UuX2dsO1xuICAgICAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLl9nbElEKTtcblxuICAgICAgdGhpcy5fbGlua2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9nbElEID0gbnVsbDtcbiAgICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSBbXTtcbiAgICAgIHRoaXMuX3VuaWZvcm1zID0gW107XG4gICAgICB0aGlzLl9zYW1wbGVycyA9IFtdO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2lkJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvZ3JhbTtcbn0oKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT1cbi8vIGludGVybmFsXG4vLyA9PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm9ncmFtO1xuZnVuY3Rpb24gX2NyZWF0ZVNoYWRlcihnbCwgdHlwZSwgc3JjKSB7XG4gIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNyYyk7XG4gIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcblxuICByZXR1cm4gc2hhZGVyO1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJbkJ5YjJkeVlXMHVhbk1pWFN3aWJtRnRaWE1pT2xzaVgyZGxia2xFSWl3aVgzQmhjbk5sUlhKeWIzSWlMQ0p2ZFhRaUxDSjBlWEJsSWl3aVpYSnliM0pNYjJjaUxDSnpjR3hwZENJc0ltWnZja1ZoWTJnaUxDSnRjMmNpTENKc1pXNW5kR2dpTENKd1lYSjBjeUlzSW1WNFpXTWlMQ0p3ZFhOb0lpd2labWxzWlVsRUlpd2liR2x1WlNJc0ltMWxjM05oWjJVaUxDSjBjbWx0SWl3aVVISnZaM0poYlNJc0ltUmxkbWxqWlNJc0ltOXdkR2x2Ym5NaUxDSmZaR1YyYVdObElpd2lYMkYwZEhKcFluVjBaWE1pTENKZmRXNXBabTl5YlhNaUxDSmZjMkZ0Y0d4bGNuTWlMQ0pmWlhKeWIzSnpJaXdpWDJ4cGJtdGxaQ0lzSWw5MlpYSjBVMjkxY21ObElpd2lkbVZ5ZENJc0lsOW1jbUZuVTI5MWNtTmxJaXdpWm5KaFp5SXNJbDluYkVsRUlpd2lYMmxrSWl3aVoyd2lMQ0pmWjJ3aUxDSjJaWEowVTJoaFpHVnlJaXdpWDJOeVpXRjBaVk5vWVdSbGNpSXNJbFpGVWxSRldGOVRTRUZFUlZJaUxDSm1jbUZuVTJoaFpHVnlJaXdpUmxKQlIwMUZUbFJmVTBoQlJFVlNJaXdpY0hKdlozSmhiU0lzSW1OeVpXRjBaVkJ5YjJkeVlXMGlMQ0poZEhSaFkyaFRhR0ZrWlhJaUxDSnNhVzVyVUhKdlozSmhiU0lzSW1aaGFXeGxaQ0lzSW1WeWNtOXljeUlzSW1kbGRGTm9ZV1JsY2xCaGNtRnRaWFJsY2lJc0lrTlBUVkJKVEVWZlUxUkJWRlZUSWl3aVoyVjBVMmhoWkdWeVNXNW1iMHh2WnlJc0ltUmxiR1YwWlZOb1lXUmxjaUlzSW1kbGRGQnliMmR5WVcxUVlYSmhiV1YwWlhJaUxDSk1TVTVMWDFOVVFWUlZVeUlzSW1sdVptOGlMQ0puWlhSUWNtOW5jbUZ0U1c1bWIweHZaeUlzSW01MWJVRjBkSEpwWW5WMFpYTWlMQ0pCUTFSSlZrVmZRVlJVVWtsQ1ZWUkZVeUlzSW1raUxDSm5aWFJCWTNScGRtVkJkSFJ5YVdJaUxDSnNiMk5oZEdsdmJpSXNJbWRsZEVGMGRISnBZa3h2WTJGMGFXOXVJaXdpYm1GdFpTSXNJbTUxYlZWdWFXWnZjbTF6SWl3aVFVTlVTVlpGWDFWT1NVWlBVazFUSWl3aVoyVjBRV04wYVhabFZXNXBabTl5YlNJc0ltZGxkRlZ1YVdadmNtMU1iMk5oZEdsdmJpSXNJbWx6UVhKeVlYa2lMQ0p6ZFdKemRISWlMQ0oxYm1sbWIzSnRJaXdpYzJsNlpTSXNJblZ1WkdWbWFXNWxaQ0lzSW1SbGJHVjBaVkJ5YjJkeVlXMGlMQ0p6Y21NaUxDSnphR0ZrWlhJaUxDSmpjbVZoZEdWVGFHRmtaWElpTENKemFHRmtaWEpUYjNWeVkyVWlMQ0pqYjIxd2FXeGxVMmhoWkdWeUlsMHNJbTFoY0hCcGJtZHpJam9pT3pzN096czdPenM3TzBGQlFVRXNTVUZCU1VFc1UwRkJVeXhEUVVGaU96dEJRVVZCTEZOQlFWTkRMRmRCUVZRc1EwRkJjVUpETEVkQlFYSkNMRVZCUVRCQ1F5eEpRVUV4UWl4RlFVRm5RME1zVVVGQmFFTXNSVUZCTUVNN1FVRkRlRU5CTEZkQlFWTkRMRXRCUVZRc1EwRkJaU3hKUVVGbUxFVkJRWEZDUXl4UFFVRnlRaXhEUVVFMlFpeGxRVUZQTzBGQlEyeERMRkZCUVVsRExFbEJRVWxETEUxQlFVb3NSMEZCWVN4RFFVRnFRaXhGUVVGdlFqdEJRVU5zUWp0QlFVTkVPenRCUVVWRUxGRkJRVWxETEZGQlFWRXNhVU5CUVdsRFF5eEpRVUZxUXl4RFFVRnpRMGdzUjBGQmRFTXNRMEZCV2p0QlFVTkJMRkZCUVVsRkxFdEJRVW9zUlVGQlZ6dEJRVU5VVUN4VlFVRkpVeXhKUVVGS0xFTkJRVk03UVVGRFVGSXNZMEZCVFVFc1NVRkVRenRCUVVWUVV5eG5Ra0ZCVVVnc1RVRkJUU3hEUVVGT0xFbEJRVmNzUTBGR1dqdEJRVWRRU1N4alFVRk5TaXhOUVVGTkxFTkJRVTRzU1VGQlZ5eERRVWhXTzBGQlNWQkxMR2xDUVVGVFRDeE5RVUZOTEVOQlFVNHNSVUZCVTAwc1NVRkJWRHRCUVVwR0xFOUJRVlE3UVVGTlJDeExRVkJFTEUxQlQwOHNTVUZCU1ZJc1NVRkJTVU1zVFVGQlNpeEhRVUZoTEVOQlFXcENMRVZCUVc5Q08wRkJRM3BDVGl4VlFVRkpVeXhKUVVGS0xFTkJRVk03UVVGRFVGSXNZMEZCVFVFc1NVRkVRenRCUVVWUVV5eG5Ra0ZCVVN4RFFVRkRMRU5CUmtZN1FVRkhVRU1zWTBGQlRTeERRVWhETzBGQlNWQkRMR2xDUVVGVFVEdEJRVXBHTEU5QlFWUTdRVUZOUkR0QlFVTkdMRWRCY2tKRU8wRkJjMEpFT3p0SlFVVnZRbE1zVHp0QlFVTnVRanM3T3pzN096czdPenM3T3pzN096czdPenM3TzBGQmNVSkJMRzFDUVVGWlF5eE5RVUZhTEVWQlFXOUNReXhQUVVGd1FpeEZRVUUyUWp0QlFVRkJPenRCUVVNelFpeFRRVUZMUXl4UFFVRk1MRWRCUVdWR0xFMUJRV1k3TzBGQlJVRTdRVUZEUVN4VFFVRkxSeXhYUVVGTUxFZEJRVzFDTEVWQlFXNUNPMEZCUTBFc1UwRkJTME1zVTBGQlRDeEhRVUZwUWl4RlFVRnFRanRCUVVOQkxGTkJRVXRETEZOQlFVd3NSMEZCYVVJc1JVRkJha0k3UVVGRFFTeFRRVUZMUXl4UFFVRk1MRWRCUVdVc1JVRkJaanRCUVVOQkxGTkJRVXRETEU5QlFVd3NSMEZCWlN4TFFVRm1PMEZCUTBFc1UwRkJTME1zVjBGQlRDeEhRVUZ0UWxBc1VVRkJVVkVzU1VGQk0wSTdRVUZEUVN4VFFVRkxReXhYUVVGTUxFZEJRVzFDVkN4UlFVRlJWU3hKUVVFelFqdEJRVU5CTEZOQlFVdERMRXRCUVV3c1IwRkJZU3hKUVVGaU8wRkJRMEVzVTBGQlMwTXNSMEZCVEN4SFFVRlhPVUlzVVVGQldEdEJRVU5FT3pzN096SkNRVTFOTzBGQlEwd3NWVUZCU1N4TFFVRkxkMElzVDBGQlZDeEZRVUZyUWp0QlFVTm9RanRCUVVORU96dEJRVVZFTEZWQlFVbFBMRXRCUVVzc1MwRkJTMW9zVDBGQlRDeERRVUZoWVN4SFFVRjBRanM3UVVGRlFTeFZRVUZKUXl4aFFVRmhReXhqUVVGalNDeEZRVUZrTEVWQlFXdENRU3hIUVVGSFNTeGhRVUZ5UWl4RlFVRnZReXhMUVVGTFZpeFhRVUY2UXl4RFFVRnFRanRCUVVOQkxGVkJRVWxYTEdGQlFXRkdMR05CUVdOSUxFVkJRV1FzUlVGQmEwSkJMRWRCUVVkTkxHVkJRWEpDTEVWQlFYTkRMRXRCUVV0V0xGZEJRVE5ETEVOQlFXcENPenRCUVVWQkxGVkJRVWxYTEZWQlFWVlFMRWRCUVVkUkxHRkJRVWdzUlVGQlpEdEJRVU5CVWl4VFFVRkhVeXhaUVVGSUxFTkJRV2RDUml4UFFVRm9RaXhGUVVGNVFrd3NWVUZCZWtJN1FVRkRRVVlzVTBGQlIxTXNXVUZCU0N4RFFVRm5Ra1lzVDBGQmFFSXNSVUZCZVVKR0xGVkJRWHBDTzBGQlEwRk1MRk5CUVVkVkxGZEJRVWdzUTBGQlpVZ3NUMEZCWmpzN1FVRkZRU3hWUVVGSlNTeFRRVUZUTEV0QlFXSTdRVUZEUVN4VlFVRkpReXhUUVVGVExFdEJRVXR3UWl4UFFVRnNRanM3UVVGRlFTeFZRVUZKTEVOQlFVTlJMRWRCUVVkaExHdENRVUZJTEVOQlFYTkNXQ3hWUVVGMFFpeEZRVUZyUTBZc1IwRkJSMk1zWTBGQmNrTXNRMEZCVEN4RlFVRXlSRHRCUVVONlJEVkRMRzlDUVVGWk1FTXNUVUZCV2l4RlFVRnZRaXhKUVVGd1FpeEZRVUV3UWxvc1IwRkJSMlVzWjBKQlFVZ3NRMEZCYjBKaUxGVkJRWEJDTEVOQlFURkNPMEZCUTBGVExHbENRVUZUTEVsQlFWUTdRVUZEUkRzN1FVRkZSQ3hWUVVGSkxFTkJRVU5ZTEVkQlFVZGhMR3RDUVVGSUxFTkJRWE5DVWl4VlFVRjBRaXhGUVVGclEwd3NSMEZCUjJNc1kwRkJja01zUTBGQlRDeEZRVUV5UkR0QlFVTjZSRFZETEc5Q1FVRlpNRU1zVFVGQldpeEZRVUZ2UWl4SlFVRndRaXhGUVVFd1Fsb3NSMEZCUjJVc1owSkJRVWdzUTBGQmIwSldMRlZCUVhCQ0xFTkJRVEZDTzBGQlEwRk5MR2xDUVVGVExFbEJRVlE3UVVGRFJEczdRVUZGUkZnc1UwRkJSMmRDTEZsQlFVZ3NRMEZCWjBKa0xGVkJRV2hDTzBGQlEwRkdMRk5CUVVkblFpeFpRVUZJTEVOQlFXZENXQ3hWUVVGb1FqczdRVUZGUVN4VlFVRkpUU3hOUVVGS0xFVkJRVms3UVVGRFZpeGxRVUZQUXl4TlFVRlFPMEZCUTBRN08wRkJSVVFzVlVGQlNTeERRVUZEV2l4SFFVRkhhVUlzYlVKQlFVZ3NRMEZCZFVKV0xFOUJRWFpDTEVWQlFXZERVQ3hIUVVGSGEwSXNWMEZCYmtNc1EwRkJUQ3hGUVVGelJEdEJRVU53UkU0c1pVRkJUMmhETEVsQlFWQXNRMEZCV1N4RlFVRkRkVU1zTUVOQlFYZERia0lzUjBGQlIyOUNMR2xDUVVGSUxFTkJRWEZDWWl4UFFVRnlRaXhEUVVGNlF5eEZRVUZhTzBGQlEwRXNaVUZCVDBzc1RVRkJVRHRCUVVORU96dEJRVVZFTEZkQlFVdGtMRXRCUVV3c1IwRkJZVk1zVDBGQllqczdRVUZGUVR0QlFVTkJMRlZCUVVsakxHZENRVUZuUW5KQ0xFZEJRVWRwUWl4dFFrRkJTQ3hEUVVGMVFsWXNUMEZCZGtJc1JVRkJaME5RTEVkQlFVZHpRaXhwUWtGQmJrTXNRMEZCY0VJN1FVRkRRU3hYUVVGTExFbEJRVWxETEVsQlFVa3NRMEZCWWl4RlFVRm5Ra0VzU1VGQlNVWXNZVUZCY0VJc1JVRkJiVU1zUlVGQlJVVXNRMEZCY2tNc1JVRkJkME03UVVGRGRFTXNXVUZCU1Vvc1QwRkJUMjVDTEVkQlFVZDNRaXhsUVVGSUxFTkJRVzFDYWtJc1QwRkJia0lzUlVGQk5FSm5RaXhEUVVFMVFpeERRVUZZTzBGQlEwRXNXVUZCU1VVc1YwRkJWM3BDTEVkQlFVY3dRaXhwUWtGQlNDeERRVUZ4UW01Q0xFOUJRWEpDTEVWQlFUaENXU3hMUVVGTFVTeEpRVUZ1UXl4RFFVRm1PenRCUVVWQkxHRkJRVXQwUXl4WFFVRk1MRU5CUVdsQ1ZDeEpRVUZxUWl4RFFVRnpRanRCUVVOd1FpdERMR2RDUVVGTlVpeExRVUZMVVN4SlFVUlRPMEZCUlhCQ1JpeHZRa0ZCVlVFc1VVRkdWVHRCUVVkd1FuSkVMR2RDUVVGTkswTXNTMEZCU3k5RE8wRkJTRk1zVTBGQmRFSTdRVUZMUkRzN1FVRkZSRHRCUVVOQkxGVkJRVWwzUkN4alFVRmpOVUlzUjBGQlIybENMRzFDUVVGSUxFTkJRWFZDVml4UFFVRjJRaXhGUVVGblExQXNSMEZCUnpaQ0xHVkJRVzVETEVOQlFXeENPMEZCUTBFc1YwRkJTeXhKUVVGSlRpeExRVUZKTEVOQlFXSXNSVUZCWjBKQkxFdEJRVWxMTEZkQlFYQkNMRVZCUVdsRExFVkJRVVZNTEVWQlFXNURMRVZCUVhORE8wRkJRM0JETEZsQlFVbEtMRkZCUVU5dVFpeEhRVUZIT0VJc1owSkJRVWdzUTBGQmIwSjJRaXhQUVVGd1FpeEZRVUUyUW1kQ0xFVkJRVGRDTEVOQlFWZzdRVUZEUVN4WlFVRkpTU3hQUVVGUFVpeE5RVUZMVVN4SlFVRm9RanRCUVVOQkxGbEJRVWxHTEZsQlFWZDZRaXhIUVVGSEswSXNhMEpCUVVnc1EwRkJjMEo0UWl4UFFVRjBRaXhGUVVFclFtOUNMRWxCUVM5Q0xFTkJRV1k3UVVGRFFTeFpRVUZKU3l4VlFVRlZUQ3hMUVVGTFRTeE5RVUZNTEVOQlFWbE9MRXRCUVV0c1JDeE5RVUZNTEVkQlFXTXNRMEZCTVVJc1RVRkJhVU1zUzBGQkwwTTdRVUZEUVN4WlFVRkpkVVFzVDBGQlNpeEZRVUZoTzBGQlExaE1MR2xDUVVGUFFTeExRVUZMVFN4TlFVRk1MRU5CUVZrc1EwRkJXaXhGUVVGbFRpeExRVUZMYkVRc1RVRkJUQ3hIUVVGakxFTkJRVGRDTEVOQlFWQTdRVUZEUkRzN1FVRkZSQ3haUVVGSmVVUXNWVUZCVlR0QlFVTmFVQ3huUWtGQlRVRXNTVUZFVFR0QlFVVmFSaXh2UWtGQlZVRXNVMEZHUlR0QlFVZGFja1FzWjBKQlFVMHJReXhOUVVGTEwwTXNTVUZJUXp0QlFVbGFLMFFzWjBKQlFVMUlMRlZCUVZWaUxFMUJRVXRuUWl4SlFVRm1MRWRCUVhOQ1F5eFRRVXBvUWl4RlFVRmtPMEZCVFVFc1lVRkJTemxETEZOQlFVd3NRMEZCWlZZc1NVRkJaaXhEUVVGdlFuTkVMRTlCUVhCQ08wRkJRMFE3TzBGQlJVUXNWMEZCUzNwRExFOUJRVXdzUjBGQlpTeEpRVUZtTzBGQlEwUTdPenM0UWtGRlV6dEJRVU5TTEZWQlFVbFBMRXRCUVVzc1MwRkJTMW9zVDBGQlRDeERRVUZoWVN4SFFVRjBRanRCUVVOQlJDeFRRVUZIY1VNc1lVRkJTQ3hEUVVGcFFpeExRVUZMZGtNc1MwRkJkRUk3TzBGQlJVRXNWMEZCUzB3c1QwRkJUQ3hIUVVGbExFdEJRV1k3UVVGRFFTeFhRVUZMU3l4TFFVRk1MRWRCUVdFc1NVRkJZanRCUVVOQkxGZEJRVXRVTEZkQlFVd3NSMEZCYlVJc1JVRkJia0k3UVVGRFFTeFhRVUZMUXl4VFFVRk1MRWRCUVdsQ0xFVkJRV3BDTzBGQlEwRXNWMEZCUzBNc1UwRkJUQ3hIUVVGcFFpeEZRVUZxUWp0QlFVTkVPenM3ZDBKQk0wWlJPMEZCUTFBc1lVRkJUeXhMUVVGTFVTeEhRVUZhTzBGQlEwUTdPenM3T3p0QlFUUkdTRHRCUVVOQk8wRkJRMEU3TzJ0Q1FYSkpjVUprTEU4N1FVRjFTWEpDTEZOQlFWTnJRaXhoUVVGVUxFTkJRWFZDU0N4RlFVRjJRaXhGUVVFeVFqVkNMRWxCUVROQ0xFVkJRV2xEYTBVc1IwRkJha01zUlVGQmMwTTdRVUZEY0VNc1RVRkJTVU1zVTBGQlUzWkRMRWRCUVVkM1F5eFpRVUZJTEVOQlFXZENjRVVzU1VGQmFFSXNRMEZCWWp0QlFVTkJORUlzUzBGQlIzbERMRmxCUVVnc1EwRkJaMEpHTEUxQlFXaENMRVZCUVhkQ1JDeEhRVUY0UWp0QlFVTkJkRU1zUzBGQlJ6QkRMR0ZCUVVnc1EwRkJhVUpJTEUxQlFXcENPenRCUVVWQkxGTkJRVTlCTEUxQlFWQTdRVUZEUkNJc0ltWnBiR1VpT2lKd2NtOW5jbUZ0TG1weklpd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2liR1YwSUY5blpXNUpSQ0E5SURBN1hISmNibHh5WEc1bWRXNWpkR2x2YmlCZmNHRnljMlZGY25KdmNpaHZkWFFzSUhSNWNHVXNJR1Z5Y205eVRHOW5LU0I3WEhKY2JpQWdaWEp5YjNKTWIyY3VjM0JzYVhRb0oxeGNiaWNwTG1admNrVmhZMmdvYlhObklEMCtJSHRjY2x4dUlDQWdJR2xtSUNodGMyY3ViR1Z1WjNSb0lEd2dOU2tnZTF4eVhHNGdJQ0FnSUNCeVpYUjFjbTQ3WEhKY2JpQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ2JHVjBJSEJoY25SeklEMGdMMTVGVWxKUFVqcGNYSE1yS0Z4Y1pDc3BPaWhjWEdRcktUcGNYSE1xS0M0cUtTUXZMbVY0WldNb2JYTm5LVHRjY2x4dUlDQWdJR2xtSUNod1lYSjBjeWtnZTF4eVhHNGdJQ0FnSUNCdmRYUXVjSFZ6YUNoN1hISmNiaUFnSUNBZ0lDQWdkSGx3WlRvZ2RIbHdaU3hjY2x4dUlDQWdJQ0FnSUNCbWFXeGxTVVE2SUhCaGNuUnpXekZkSUh3Z01DeGNjbHh1SUNBZ0lDQWdJQ0JzYVc1bE9pQndZWEowYzFzeVhTQjhJREFzWEhKY2JpQWdJQ0FnSUNBZ2JXVnpjMkZuWlRvZ2NHRnlkSE5iTTEwdWRISnBiU2dwWEhKY2JpQWdJQ0FnSUgwcFhISmNiaUFnSUNCOUlHVnNjMlVnYVdZZ0tHMXpaeTVzWlc1bmRHZ2dQaUF3S1NCN1hISmNiaUFnSUNBZ0lHOTFkQzV3ZFhOb0tIdGNjbHh1SUNBZ0lDQWdJQ0IwZVhCbE9pQjBlWEJsTEZ4eVhHNGdJQ0FnSUNBZ0lHWnBiR1ZKUkRvZ0xURXNYSEpjYmlBZ0lDQWdJQ0FnYkdsdVpUb2dNQ3hjY2x4dUlDQWdJQ0FnSUNCdFpYTnpZV2RsT2lCdGMyZGNjbHh1SUNBZ0lDQWdmU2s3WEhKY2JpQWdJQ0I5WEhKY2JpQWdmU2s3WEhKY2JuMWNjbHh1WEhKY2JtVjRjRzl5ZENCa1pXWmhkV3gwSUdOc1lYTnpJRkJ5YjJkeVlXMGdlMXh5WEc0Z0lDOHFLbHh5WEc0Z0lDQXFJRUJ3WVhKaGJTQjdaV1l1UjNKaGNHaHBZM05FWlhacFkyVjlJR1JsZG1salpTQXRJR2R5WVhCb2FXTWdaR1YyYVdObFhISmNiaUFnSUNvZ1FIQmhjbUZ0SUh0dlltcGxZM1I5SUc5d2RHbHZibk1nTFNCemFHRmtaWElnWkdWbWFXNXBkR2x2Ymx4eVhHNGdJQ0FxSUVCd1lYSmhiU0I3YzNSeWFXNW5mU0J2Y0hScGIyNXpMblpsY25RZ0xTQjJaWEowWlhnZ2MyaGhaR1Z5SUhOdmRYSmpaU0JqYjJSbFhISmNiaUFnSUNvZ1FIQmhjbUZ0SUh0emRISnBibWQ5SUc5d2RHbHZibk11Wm5KaFp5QXRJR1p5WVdkdFpXNTBJSE5vWVdSbGNpQnphR0ZrWlhJZ2MyOTFjbU5sSUdOdlpHVmNjbHh1SUNBZ0tpQkFaWGhoYlhCc1pWeHlYRzRnSUNBcUlHeGxkQ0J3Y205bklEMGdibVYzSUZCeWIyZHlZVzBvWkdWMmFXTmxMQ0I3WEhKY2JpQWdJQ29nSUNCMlpYSjBPaUJnWEhKY2JpQWdJQ29nSUNBZ0lHRjBkSEpwWW5WMFpTQjJaV016SUdGZmNHOXphWFJwYjI0N1hISmNiaUFnSUNvZ0lDQWdJSFp2YVdRZ2JXRnBiaWdwSUh0Y2NseHVJQ0FnS2lBZ0lDQWdJQ0JuYkY5UWIzTnBkR2x2YmlBOUlIWmxZelFvSUdGZmNHOXphWFJwYjI0c0lERXVNQ0FwTzF4eVhHNGdJQ0FxSUNBZ0lDQjlYSEpjYmlBZ0lDb2dJQ0JnTEZ4eVhHNGdJQ0FxSUNBZ1puSmhaem9nWUZ4eVhHNGdJQ0FxSUNBZ0lDQndjbVZqYVhOcGIyNGdiV1ZrYVhWdGNDQm1iRzloZER0Y2NseHVJQ0FnS2lBZ0lDQWdkbTlwWkNCdFlXbHVLQ2tnZTF4eVhHNGdJQ0FxSUNBZ0lDQWdJR2RzWDBaeVlXZERiMnh2Y2lBOUlIWmxZelFvSURFdU1Dd2dNUzR3TENBeExqQXNJREV1TUNBcE8xeHlYRzRnSUNBcUlDQWdJQ0I5WEhKY2JpQWdJQ29nSUNCZ1hISmNiaUFnSUNvZ2ZTazdYSEpjYmlBZ0lDb3ZYSEpjYmlBZ1kyOXVjM1J5ZFdOMGIzSW9aR1YyYVdObExDQnZjSFJwYjI1ektTQjdYSEpjYmlBZ0lDQjBhR2x6TGw5a1pYWnBZMlVnUFNCa1pYWnBZMlU3WEhKY2JseHlYRzRnSUNBZ0x5OGdjM1J2Y21WeklHZHNJR2x1Wm05eWJXRjBhVzl1T2lCN0lHeHZZMkYwYVc5dUxDQjBlWEJsSUgxY2NseHVJQ0FnSUhSb2FYTXVYMkYwZEhKcFluVjBaWE1nUFNCYlhUdGNjbHh1SUNBZ0lIUm9hWE11WDNWdWFXWnZjbTF6SUQwZ1cxMDdYSEpjYmlBZ0lDQjBhR2x6TGw5ellXMXdiR1Z5Y3lBOUlGdGRPMXh5WEc0Z0lDQWdkR2hwY3k1ZlpYSnliM0p6SUQwZ1cxMDdYSEpjYmlBZ0lDQjBhR2x6TGw5c2FXNXJaV1FnUFNCbVlXeHpaVHRjY2x4dUlDQWdJSFJvYVhNdVgzWmxjblJUYjNWeVkyVWdQU0J2Y0hScGIyNXpMblpsY25RN1hISmNiaUFnSUNCMGFHbHpMbDltY21GblUyOTFjbU5sSUQwZ2IzQjBhVzl1Y3k1bWNtRm5PMXh5WEc0Z0lDQWdkR2hwY3k1ZloyeEpSQ0E5SUc1MWJHdzdYSEpjYmlBZ0lDQjBhR2x6TGw5cFpDQTlJRjluWlc1SlJDc3JPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdaMlYwSUdsa0tDa2dlMXh5WEc0Z0lDQWdjbVYwZFhKdUlIUm9hWE11WDJsa08xeHlYRzRnSUgxY2NseHVYSEpjYmlBZ2JHbHVheWdwSUh0Y2NseHVJQ0FnSUdsbUlDaDBhR2x6TGw5c2FXNXJaV1FwSUh0Y2NseHVJQ0FnSUNBZ2NtVjBkWEp1TzF4eVhHNGdJQ0FnZlZ4eVhHNWNjbHh1SUNBZ0lHeGxkQ0JuYkNBOUlIUm9hWE11WDJSbGRtbGpaUzVmWjJ3N1hISmNibHh5WEc0Z0lDQWdiR1YwSUhabGNuUlRhR0ZrWlhJZ1BTQmZZM0psWVhSbFUyaGhaR1Z5S0dkc0xDQm5iQzVXUlZKVVJWaGZVMGhCUkVWU0xDQjBhR2x6TGw5MlpYSjBVMjkxY21ObEtUdGNjbHh1SUNBZ0lHeGxkQ0JtY21GblUyaGhaR1Z5SUQwZ1gyTnlaV0YwWlZOb1lXUmxjaWhuYkN3Z1oyd3VSbEpCUjAxRlRsUmZVMGhCUkVWU0xDQjBhR2x6TGw5bWNtRm5VMjkxY21ObEtUdGNjbHh1WEhKY2JpQWdJQ0JzWlhRZ2NISnZaM0poYlNBOUlHZHNMbU55WldGMFpWQnliMmR5WVcwb0tUdGNjbHh1SUNBZ0lHZHNMbUYwZEdGamFGTm9ZV1JsY2lod2NtOW5jbUZ0TENCMlpYSjBVMmhoWkdWeUtUdGNjbHh1SUNBZ0lHZHNMbUYwZEdGamFGTm9ZV1JsY2lod2NtOW5jbUZ0TENCbWNtRm5VMmhoWkdWeUtUdGNjbHh1SUNBZ0lHZHNMbXhwYm10UWNtOW5jbUZ0S0hCeWIyZHlZVzBwTzF4eVhHNWNjbHh1SUNBZ0lHeGxkQ0JtWVdsc1pXUWdQU0JtWVd4elpUdGNjbHh1SUNBZ0lHeGxkQ0JsY25KdmNuTWdQU0IwYUdsekxsOWxjbkp2Y25NN1hISmNibHh5WEc0Z0lDQWdhV1lnS0NGbmJDNW5aWFJUYUdGa1pYSlFZWEpoYldWMFpYSW9kbVZ5ZEZOb1lXUmxjaXdnWjJ3dVEwOU5VRWxNUlY5VFZFRlVWVk1wS1NCN1hISmNiaUFnSUNBZ0lGOXdZWEp6WlVWeWNtOXlLR1Z5Y205eWN5d2dKM1p6Snl3Z1oyd3VaMlYwVTJoaFpHVnlTVzVtYjB4dlp5aDJaWEowVTJoaFpHVnlLU2s3WEhKY2JpQWdJQ0FnSUdaaGFXeGxaQ0E5SUhSeWRXVTdYSEpjYmlBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnYVdZZ0tDRm5iQzVuWlhSVGFHRmtaWEpRWVhKaGJXVjBaWElvWm5KaFoxTm9ZV1JsY2l3Z1oyd3VRMDlOVUVsTVJWOVRWRUZVVlZNcEtTQjdYSEpjYmlBZ0lDQWdJRjl3WVhKelpVVnljbTl5S0dWeWNtOXljeXdnSjJaekp5d2daMnd1WjJWMFUyaGhaR1Z5U1c1bWIweHZaeWhtY21GblUyaGhaR1Z5S1NrN1hISmNiaUFnSUNBZ0lHWmhhV3hsWkNBOUlIUnlkV1U3WEhKY2JpQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ1oyd3VaR1ZzWlhSbFUyaGhaR1Z5S0habGNuUlRhR0ZrWlhJcE8xeHlYRzRnSUNBZ1oyd3VaR1ZzWlhSbFUyaGhaR1Z5S0daeVlXZFRhR0ZrWlhJcE8xeHlYRzVjY2x4dUlDQWdJR2xtSUNobVlXbHNaV1FwSUh0Y2NseHVJQ0FnSUNBZ2NtVjBkWEp1SUdWeWNtOXljenRjY2x4dUlDQWdJSDFjY2x4dVhISmNiaUFnSUNCcFppQW9JV2RzTG1kbGRGQnliMmR5WVcxUVlYSmhiV1YwWlhJb2NISnZaM0poYlN3Z1oyd3VURWxPUzE5VFZFRlVWVk1wS1NCN1hISmNiaUFnSUNBZ0lHVnljbTl5Y3k1d2RYTm9LSHRwYm1adk9pQmdSbUZwYkdWa0lIUnZJR3hwYm1zZ2MyaGhaR1Z5SUhCeWIyZHlZVzA2SUNSN1oyd3VaMlYwVUhKdlozSmhiVWx1Wm05TWIyY29jSEp2WjNKaGJTbDlZSDBwTzF4eVhHNGdJQ0FnSUNCeVpYUjFjbTRnWlhKeWIzSnpPMXh5WEc0Z0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUhSb2FYTXVYMmRzU1VRZ1BTQndjbTluY21GdE8xeHlYRzVjY2x4dUlDQWdJQzh2SUhCaGNuTmxJR0YwZEhKcFluVjBaVnh5WEc0Z0lDQWdiR1YwSUc1MWJVRjBkSEpwWW5WMFpYTWdQU0JuYkM1blpYUlFjbTluY21GdFVHRnlZVzFsZEdWeUtIQnliMmR5WVcwc0lHZHNMa0ZEVkVsV1JWOUJWRlJTU1VKVlZFVlRLVHRjY2x4dUlDQWdJR1p2Y2lBb2JHVjBJR2tnUFNBd095QnBJRHdnYm5WdFFYUjBjbWxpZFhSbGN6c2dLeXRwS1NCN1hISmNiaUFnSUNBZ0lHeGxkQ0JwYm1adklEMGdaMnd1WjJWMFFXTjBhWFpsUVhSMGNtbGlLSEJ5YjJkeVlXMHNJR2twTzF4eVhHNGdJQ0FnSUNCc1pYUWdiRzlqWVhScGIyNGdQU0JuYkM1blpYUkJkSFJ5YVdKTWIyTmhkR2x2Ymlod2NtOW5jbUZ0TENCcGJtWnZMbTVoYldVcE8xeHlYRzVjY2x4dUlDQWdJQ0FnZEdocGN5NWZZWFIwY21saWRYUmxjeTV3ZFhOb0tIdGNjbHh1SUNBZ0lDQWdJQ0J1WVcxbE9pQnBibVp2TG01aGJXVXNYSEpjYmlBZ0lDQWdJQ0FnYkc5allYUnBiMjQ2SUd4dlkyRjBhVzl1TEZ4eVhHNGdJQ0FnSUNBZ0lIUjVjR1U2SUdsdVptOHVkSGx3WlN4Y2NseHVJQ0FnSUNBZ2ZTazdYSEpjYmlBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnTHk4Z2NHRnljMlVnZFc1cFptOXliVnh5WEc0Z0lDQWdiR1YwSUc1MWJWVnVhV1p2Y20xeklEMGdaMnd1WjJWMFVISnZaM0poYlZCaGNtRnRaWFJsY2lod2NtOW5jbUZ0TENCbmJDNUJRMVJKVmtWZlZVNUpSazlTVFZNcE8xeHlYRzRnSUNBZ1ptOXlJQ2hzWlhRZ2FTQTlJREE3SUdrZ1BDQnVkVzFWYm1sbWIzSnRjenNnS3l0cEtTQjdYSEpjYmlBZ0lDQWdJR3hsZENCcGJtWnZJRDBnWjJ3dVoyVjBRV04wYVhabFZXNXBabTl5YlNod2NtOW5jbUZ0TENCcEtUdGNjbHh1SUNBZ0lDQWdiR1YwSUc1aGJXVWdQU0JwYm1adkxtNWhiV1U3WEhKY2JpQWdJQ0FnSUd4bGRDQnNiMk5oZEdsdmJpQTlJR2RzTG1kbGRGVnVhV1p2Y20xTWIyTmhkR2x2Ymlod2NtOW5jbUZ0TENCdVlXMWxLVHRjY2x4dUlDQWdJQ0FnYkdWMElHbHpRWEp5WVhrZ1BTQnVZVzFsTG5OMVluTjBjaWh1WVcxbExteGxibWQwYUNBdElETXBJRDA5UFNBbld6QmRKenRjY2x4dUlDQWdJQ0FnYVdZZ0tHbHpRWEp5WVhrcElIdGNjbHh1SUNBZ0lDQWdJQ0J1WVcxbElEMGdibUZ0WlM1emRXSnpkSElvTUN3Z2JtRnRaUzVzWlc1bmRHZ2dMU0F6S1R0Y2NseHVJQ0FnSUNBZ2ZWeHlYRzVjY2x4dUlDQWdJQ0FnYkdWMElIVnVhV1p2Y20wZ1BTQjdYSEpjYmlBZ0lDQWdJQ0FnYm1GdFpUb2dibUZ0WlN4Y2NseHVJQ0FnSUNBZ0lDQnNiMk5oZEdsdmJqb2diRzlqWVhScGIyNHNYSEpjYmlBZ0lDQWdJQ0FnZEhsd1pUb2dhVzVtYnk1MGVYQmxMRnh5WEc0Z0lDQWdJQ0FnSUhOcGVtVTZJR2x6UVhKeVlYa2dQeUJwYm1adkxuTnBlbVVnT2lCMWJtUmxabWx1WldRc0lDOHZJSFZ6WldRZ2QyaGxiaUIxYm1sbWIzSnRJR2x6SUdGdUlHRnljbUY1WEhKY2JpQWdJQ0FnSUgwN1hISmNiaUFnSUNBZ0lIUm9hWE11WDNWdWFXWnZjbTF6TG5CMWMyZ29kVzVwWm05eWJTazdYSEpjYmlBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnZEdocGN5NWZiR2x1YTJWa0lEMGdkSEoxWlR0Y2NseHVJQ0I5WEhKY2JseHlYRzRnSUdSbGMzUnliM2tvS1NCN1hISmNiaUFnSUNCc1pYUWdaMndnUFNCMGFHbHpMbDlrWlhacFkyVXVYMmRzTzF4eVhHNGdJQ0FnWjJ3dVpHVnNaWFJsVUhKdlozSmhiU2gwYUdsekxsOW5iRWxFS1R0Y2NseHVYSEpjYmlBZ0lDQjBhR2x6TGw5c2FXNXJaV1FnUFNCbVlXeHpaVHRjY2x4dUlDQWdJSFJvYVhNdVgyZHNTVVFnUFNCdWRXeHNPMXh5WEc0Z0lDQWdkR2hwY3k1ZllYUjBjbWxpZFhSbGN5QTlJRnRkTzF4eVhHNGdJQ0FnZEdocGN5NWZkVzVwWm05eWJYTWdQU0JiWFR0Y2NseHVJQ0FnSUhSb2FYTXVYM05oYlhCc1pYSnpJRDBnVzEwN1hISmNiaUFnZlZ4eVhHNTlYSEpjYmx4eVhHNHZMeUE5UFQwOVBUMDlQVDA5UFQwOVBUMDlQVDA5UFZ4eVhHNHZMeUJwYm5SbGNtNWhiRnh5WEc0dkx5QTlQVDA5UFQwOVBUMDlQVDA5UFQwOVBUMDlQVnh5WEc1Y2NseHVablZ1WTNScGIyNGdYMk55WldGMFpWTm9ZV1JsY2lobmJDd2dkSGx3WlN3Z2MzSmpLU0I3WEhKY2JpQWdiR1YwSUhOb1lXUmxjaUE5SUdkc0xtTnlaV0YwWlZOb1lXUmxjaWgwZVhCbEtUdGNjbHh1SUNCbmJDNXphR0ZrWlhKVGIzVnlZMlVvYzJoaFpHVnlMQ0J6Y21NcE8xeHlYRzRnSUdkc0xtTnZiWEJwYkdWVGFHRmtaWElvYzJoaFpHVnlLVHRjY2x4dVhISmNiaUFnY21WMGRYSnVJSE5vWVdSbGNqdGNjbHh1ZlNKZGZRPT0iXX0=