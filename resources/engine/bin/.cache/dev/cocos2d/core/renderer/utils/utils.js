(function () {
    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
    var __module = nodeEnv ? module : { exports: {} };
    var __filename = 'engine-dev/cocos2d/core/renderer/utils/utils.js';
    var __require = nodeEnv ? function (request) {
        return require(request);
    } : function (request) {
        return __quick_compile__.require(request, __filename);
    };
    function __define(exports, require, module) {
        if (!nodeEnv) {
            __quick_compile__.registerModule(__filename, module);
        }
                'use strict';
        var dynamicAtlasManager = require('./dynamic-atlas/manager');
        module.exports = {
            packToDynamicAtlas: function packToDynamicAtlas(comp, frame) {
                if (frame && !CC_TEST) {
                    if (!frame._original && dynamicAtlasManager) {
                        var packedFrame = dynamicAtlasManager.insertSpriteFrame(frame);
                        if (packedFrame) {
                            frame._setDynamicAtlasFrame(packedFrame);
                        }
                    }
                    if (comp.sharedMaterials[0].getProperty('texture') !== frame._texture) {
                        comp._activateMaterial(true);
                    }
                }
            },
            deleteFromDynamicAtlas: function deleteFromDynamicAtlas(comp, frame) {
                if (frame && !CC_TEST) {
                    if (frame._original && dynamicAtlasManager) {
                        dynamicAtlasManager.deleteAtlasTexture(frame);
                        frame._resetDynamicAtlasFrame();
                    }
                }
            }
        };
    }
    if (nodeEnv) {
        __define(__module.exports, __require, __module);
    } else {
        __quick_compile__.registerModuleFunc(__filename, function () {
            __define(__module.exports, __require, __module);
        });
    }
}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwiQzovVXNlcnMvbmFudGFzL2ZpcmViYWxsLXgvZmJfMjEtcmVsZWFzZS9lbmdpbmUvY29jb3MyZC9jb3JlL3JlbmRlcmVyL3V0aWxzL3V0aWxzLmpzIl0sIm5hbWVzIjpbImR5bmFtaWNBdGxhc01hbmFnZXIiLCJwYWNrVG9EeW5hbWljQXRsYXMiLCJDQ19URVNUIiwicGFja2VkRnJhbWUiLCJpbnNlcnRTcHJpdGVGcmFtZSIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiY29tcCIsImZyYW1lIiwiX29yaWdpbmFsIiwiX3NldER5bmFtaWNBdGxhc0ZyYW1lIiwic2hhcmVkTWF0ZXJpYWxzIiwiZ2V0UHJvcGVydHkiLCJfdGV4dHVyZSIsIl9hY3RpdmF0ZU1hdGVyaWFsIiwiZGVsZXRlRnJvbUR5bmFtaWNBdGxhcyIsImRlbGV0ZUF0bGFzVGV4dHVyZSIsIl9yZXNldER5bmFtaWNBdGxhc0ZyYW1lIl0sIm1hcHBpbmdzIjoiO0lBQU1BLElBQUFBLE9BQUFBLEdBQThCLE9BQUEsT0FBQSxLQUFBLFdBQUEsSUFBcEMsT0FBQSxPQUFBLEtBQUEsV0FBTUE7O0lBRVcsSUFBQSxVQUFBLEdBQUEsaURBQUE7SUFDYkMsSUFEYSxTQUFBLEdBQUEsT0FBQSxHQUFBLFVBQUEsT0FBQSxFQUNvQjtBQUFBLFFBQzdCLE9BQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUQ2QjtBQUFBLEtBRHBCLEdBR1QsVUFBQSxPQUFBLEVBQUE7QUFBQSxRQUNjQyxPQUFTLGlCQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsRUFBQSxVQUFBLENBQVRBLENBRGQ7QUFBQSxLQUZKRDtJQUtnQkUsU0FBQUEsUUFBQUEsQ0FBY0gsT0FBZEcsRUFBY0gsT0FBZEcsRUFBa0NDLE1BQWxDRCxFQUFrQ0M7QUFBQUEsUUFDbENELElBQUFBLENBQUFBLE9BQUFBLEVBQWE7QUFBQSxZQUFBLGlCQUFBLENBQUEsY0FBQSxDQUFBLFVBQUEsRUFBQSxNQUFBLEVBQUE7QUFBQSxTQURxQkM7QUFBQUE7UUFSdEQsSUFBTUosbUJBQUFBLEdBQXNCSyxPQUFBQSxDQUFRLHlCQUFSQSxDQUE1QjtRQUVBQyxNQUFBQSxDQUFPQyxPQUFQRCxHQUFpQjtBQUFBLFlBQ2JMLGtCQUFBQSxFQURhLFNBQUEsa0JBQUEsQ0FDT08sSUFEUCxFQUNhQyxLQURiLEVBQ29CO0FBQUEsZ0JBRzdCLElBQUlBLEtBQUFBLElBQVMsQ0FBQ1AsT0FBZCxFQUF1QjtBQUFBLG9CQUNuQixJQUFJLENBQUNPLEtBQUFBLENBQU1DLFNBQVAsSUFBb0JWLG1CQUF4QixFQUE2QztBQUFBLHdCQUN6QyxJQUFJRyxXQUFBQSxHQUFjSCxtQkFBQUEsQ0FBb0JJLGlCQUFwQkosQ0FBc0NTLEtBQXRDVCxDQUFsQixDQUR5QztBQUFBLHdCQUV6QyxJQUFJRyxXQUFKLEVBQWlCO0FBQUEsNEJBQ2JNLEtBQUFBLENBQU1FLHFCQUFORixDQUE0Qk4sV0FBNUJNLEVBRGE7QUFBQSx5QkFGd0I7QUFBQSxxQkFEMUI7QUFBQSxvQkFPbkIsSUFBSUQsSUFBQUEsQ0FBS0ksZUFBTEosQ0FBcUIsQ0FBckJBLEVBQXdCSyxXQUF4QkwsQ0FBb0MsU0FBcENBLE1BQW1EQyxLQUFBQSxDQUFNSyxRQUE3RCxFQUF1RTtBQUFBLHdCQUNuRU4sSUFBQUEsQ0FBS08saUJBQUxQLENBQXVCLElBQXZCQSxFQURtRTtBQUFBLHFCQVBwRDtBQUFBLGlCQUhNO0FBQUEsYUFEcEI7QUFBQSxZQWlCYlEsc0JBQUFBLEVBakJhLFNBQUEsc0JBQUEsQ0FpQldSLElBakJYLEVBaUJpQkMsS0FqQmpCLEVBaUJ3QjtBQUFBLGdCQUNqQyxJQUFJQSxLQUFBQSxJQUFTLENBQUNQLE9BQWQsRUFBdUI7QUFBQSxvQkFDbkIsSUFBSU8sS0FBQUEsQ0FBTUMsU0FBTkQsSUFBbUJULG1CQUF2QixFQUE0QztBQUFBLHdCQUN4Q0EsbUJBQUFBLENBQW9CaUIsa0JBQXBCakIsQ0FBdUNTLEtBQXZDVCxFQUR3QztBQUFBLHdCQUV4Q1MsS0FBQUEsQ0FBTVMsdUJBQU5ULEdBRndDO0FBQUEscUJBRHpCO0FBQUEsaUJBRFU7QUFBQSxhQWpCeEI7QUFBQSxTQUFqQkgsQ0FNc0RGO0FBQUFBO0lBR3JDLElBQUEsT0FBQSxFQUFBO0FBQUEsUUFDSixRQUFBLENBQUEsUUFBQSxDQUFBLE9BQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQURJO0FBQUEsS0FBQSxNQUdJVztBQUFBQSxRQUNSLGlCQUFBLENBQUEsa0JBQUEsQ0FBQSxVQUFBLEVBQUEsWUFBQTtBQUFBLFlBQ0osUUFBQSxDQUFBLFFBQUEsQ0FBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsRUFESTtBQUFBLFNBQUEsRUFEUUE7QUFBQUEiLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkeW5hbWljQXRsYXNNYW5hZ2VyID0gcmVxdWlyZSgnLi9keW5hbWljLWF0bGFzL21hbmFnZXInKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgcGFja1RvRHluYW1pY0F0bGFzIChjb21wLCBmcmFtZSkge1xyXG4gICAgICAgIC8vIFRPRE86IE1hdGVyaWFsIEFQSSBkZXNpZ24gYW5kIGV4cG9ydCBmcm9tIGVkaXRvciBjb3VsZCBhZmZlY3QgdGhlIG1hdGVyaWFsIGFjdGl2YXRpb24gcHJvY2Vzc1xyXG4gICAgICAgIC8vIG5lZWQgdG8gdXBkYXRlIHRoZSBsb2dpYyBoZXJlXHJcbiAgICAgICAgaWYgKGZyYW1lICYmICFDQ19URVNUKSB7XHJcbiAgICAgICAgICAgIGlmICghZnJhbWUuX29yaWdpbmFsICYmIGR5bmFtaWNBdGxhc01hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYWNrZWRGcmFtZSA9IGR5bmFtaWNBdGxhc01hbmFnZXIuaW5zZXJ0U3ByaXRlRnJhbWUoZnJhbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhY2tlZEZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhbWUuX3NldER5bmFtaWNBdGxhc0ZyYW1lKHBhY2tlZEZyYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29tcC5zaGFyZWRNYXRlcmlhbHNbMF0uZ2V0UHJvcGVydHkoJ3RleHR1cmUnKSAhPT0gZnJhbWUuX3RleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbXAuX2FjdGl2YXRlTWF0ZXJpYWwodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LCBcclxuXHJcbiAgICBkZWxldGVGcm9tRHluYW1pY0F0bGFzIChjb21wLCBmcmFtZSkge1xyXG4gICAgICAgIGlmIChmcmFtZSAmJiAhQ0NfVEVTVCkge1xyXG4gICAgICAgICAgICBpZiAoZnJhbWUuX29yaWdpbmFsICYmIGR5bmFtaWNBdGxhc01hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgIGR5bmFtaWNBdGxhc01hbmFnZXIuZGVsZXRlQXRsYXNUZXh0dXJlKGZyYW1lKTtcclxuICAgICAgICAgICAgICAgIGZyYW1lLl9yZXNldER5bmFtaWNBdGxhc0ZyYW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkeW5hbWljQXRsYXNNYW5hZ2VyID0gcmVxdWlyZSgnLi9keW5hbWljLWF0bGFzL21hbmFnZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgcGFja1RvRHluYW1pY0F0bGFzOiBmdW5jdGlvbiBwYWNrVG9EeW5hbWljQXRsYXMoY29tcCwgZnJhbWUpIHtcbiAgICAgICAgLy8gVE9ETzogTWF0ZXJpYWwgQVBJIGRlc2lnbiBhbmQgZXhwb3J0IGZyb20gZWRpdG9yIGNvdWxkIGFmZmVjdCB0aGUgbWF0ZXJpYWwgYWN0aXZhdGlvbiBwcm9jZXNzXG4gICAgICAgIC8vIG5lZWQgdG8gdXBkYXRlIHRoZSBsb2dpYyBoZXJlXG4gICAgICAgIGlmIChmcmFtZSAmJiAhQ0NfVEVTVCkge1xuICAgICAgICAgICAgaWYgKCFmcmFtZS5fb3JpZ2luYWwgJiYgZHluYW1pY0F0bGFzTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHZhciBwYWNrZWRGcmFtZSA9IGR5bmFtaWNBdGxhc01hbmFnZXIuaW5zZXJ0U3ByaXRlRnJhbWUoZnJhbWUpO1xuICAgICAgICAgICAgICAgIGlmIChwYWNrZWRGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBmcmFtZS5fc2V0RHluYW1pY0F0bGFzRnJhbWUocGFja2VkRnJhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb21wLnNoYXJlZE1hdGVyaWFsc1swXS5nZXRQcm9wZXJ0eSgndGV4dHVyZScpICE9PSBmcmFtZS5fdGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIGNvbXAuX2FjdGl2YXRlTWF0ZXJpYWwodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRlbGV0ZUZyb21EeW5hbWljQXRsYXM6IGZ1bmN0aW9uIGRlbGV0ZUZyb21EeW5hbWljQXRsYXMoY29tcCwgZnJhbWUpIHtcbiAgICAgICAgaWYgKGZyYW1lICYmICFDQ19URVNUKSB7XG4gICAgICAgICAgICBpZiAoZnJhbWUuX29yaWdpbmFsICYmIGR5bmFtaWNBdGxhc01hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBkeW5hbWljQXRsYXNNYW5hZ2VyLmRlbGV0ZUF0bGFzVGV4dHVyZShmcmFtZSk7XG4gICAgICAgICAgICAgICAgZnJhbWUuX3Jlc2V0RHluYW1pY0F0bGFzRnJhbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJblYwYVd4ekxtcHpJbDBzSW01aGJXVnpJanBiSW1SNWJtRnRhV05CZEd4aGMwMWhibUZuWlhJaUxDSnlaWEYxYVhKbElpd2liVzlrZFd4bElpd2laWGh3YjNKMGN5SXNJbkJoWTJ0VWIwUjVibUZ0YVdOQmRHeGhjeUlzSW1OdmJYQWlMQ0ptY21GdFpTSXNJa05EWDFSRlUxUWlMQ0pmYjNKcFoybHVZV3dpTENKd1lXTnJaV1JHY21GdFpTSXNJbWx1YzJWeWRGTndjbWwwWlVaeVlXMWxJaXdpWDNObGRFUjVibUZ0YVdOQmRHeGhjMFp5WVcxbElpd2ljMmhoY21Wa1RXRjBaWEpwWVd4eklpd2laMlYwVUhKdmNHVnlkSGtpTENKZmRHVjRkSFZ5WlNJc0lsOWhZM1JwZG1GMFpVMWhkR1Z5YVdGc0lpd2laR1ZzWlhSbFJuSnZiVVI1Ym1GdGFXTkJkR3hoY3lJc0ltUmxiR1YwWlVGMGJHRnpWR1Y0ZEhWeVpTSXNJbDl5WlhObGRFUjVibUZ0YVdOQmRHeGhjMFp5WVcxbElsMHNJbTFoY0hCcGJtZHpJam9pT3p0QlFVRkJMRWxCUVUxQkxITkNRVUZ6UWtNc1VVRkJVU3g1UWtGQlVpeERRVUUxUWpzN1FVRkZRVU1zVDBGQlQwTXNUMEZCVUN4SFFVRnBRanRCUVVOaVF5eHpRa0ZFWVN3NFFrRkRUME1zU1VGRVVDeEZRVU5oUXl4TFFVUmlMRVZCUTI5Q08wRkJRemRDTzBGQlEwRTdRVUZEUVN4WlFVRkpRU3hUUVVGVExFTkJRVU5ETEU5QlFXUXNSVUZCZFVJN1FVRkRia0lzWjBKQlFVa3NRMEZCUTBRc1RVRkJUVVVzVTBGQlVDeEpRVUZ2UWxJc2JVSkJRWGhDTEVWQlFUWkRPMEZCUTNwRExHOUNRVUZKVXl4alFVRmpWQ3h2UWtGQmIwSlZMR2xDUVVGd1FpeERRVUZ6UTBvc1MwRkJkRU1zUTBGQmJFSTdRVUZEUVN4dlFrRkJTVWNzVjBGQlNpeEZRVUZwUWp0QlFVTmlTQ3d3UWtGQlRVc3NjVUpCUVU0c1EwRkJORUpHTEZkQlFUVkNPMEZCUTBnN1FVRkRTanRCUVVORUxHZENRVUZKU2l4TFFVRkxUeXhsUVVGTUxFTkJRWEZDTEVOQlFYSkNMRVZCUVhkQ1F5eFhRVUY0UWl4RFFVRnZReXhUUVVGd1F5eE5RVUZ0UkZBc1RVRkJUVkVzVVVGQk4wUXNSVUZCZFVVN1FVRkRia1ZVTEhGQ1FVRkxWU3hwUWtGQlRDeERRVUYxUWl4SlFVRjJRanRCUVVOSU8wRkJRMG83UVVGRFNpeExRV1paTzBGQmFVSmlReXd3UWtGcVFtRXNhME5CYVVKWFdDeEpRV3BDV0N4RlFXbENhVUpETEV0QmFrSnFRaXhGUVdsQ2QwSTdRVUZEYWtNc1dVRkJTVUVzVTBGQlV5eERRVUZEUXl4UFFVRmtMRVZCUVhWQ08wRkJRMjVDTEdkQ1FVRkpSQ3hOUVVGTlJTeFRRVUZPTEVsQlFXMUNVaXh0UWtGQmRrSXNSVUZCTkVNN1FVRkRlRU5CTEc5RFFVRnZRbWxDTEd0Q1FVRndRaXhEUVVGMVExZ3NTMEZCZGtNN1FVRkRRVUVzYzBKQlFVMVpMSFZDUVVGT08wRkJRMGc3UVVGRFNqdEJRVU5LTzBGQmVFSlpMRU5CUVdwQ0lpd2labWxzWlNJNkluVjBhV3h6TG1weklpd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2lZMjl1YzNRZ1pIbHVZVzFwWTBGMGJHRnpUV0Z1WVdkbGNpQTlJSEpsY1hWcGNtVW9KeTR2WkhsdVlXMXBZeTFoZEd4aGN5OXRZVzVoWjJWeUp5azdYSEpjYmx4eVhHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlIdGNjbHh1SUNBZ0lIQmhZMnRVYjBSNWJtRnRhV05CZEd4aGN5QW9ZMjl0Y0N3Z1puSmhiV1VwSUh0Y2NseHVJQ0FnSUNBZ0lDQXZMeUJVVDBSUE9pQk5ZWFJsY21saGJDQkJVRWtnWkdWemFXZHVJR0Z1WkNCbGVIQnZjblFnWm5KdmJTQmxaR2wwYjNJZ1kyOTFiR1FnWVdabVpXTjBJSFJvWlNCdFlYUmxjbWxoYkNCaFkzUnBkbUYwYVc5dUlIQnliMk5sYzNOY2NseHVJQ0FnSUNBZ0lDQXZMeUJ1WldWa0lIUnZJSFZ3WkdGMFpTQjBhR1VnYkc5bmFXTWdhR1Z5WlZ4eVhHNGdJQ0FnSUNBZ0lHbG1JQ2htY21GdFpTQW1KaUFoUTBOZlZFVlRWQ2tnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0JwWmlBb0lXWnlZVzFsTGw5dmNtbG5hVzVoYkNBbUppQmtlVzVoYldsalFYUnNZWE5OWVc1aFoyVnlLU0I3WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCc1pYUWdjR0ZqYTJWa1JuSmhiV1VnUFNCa2VXNWhiV2xqUVhSc1lYTk5ZVzVoWjJWeUxtbHVjMlZ5ZEZOd2NtbDBaVVp5WVcxbEtHWnlZVzFsS1R0Y2NseHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHbG1JQ2h3WVdOclpXUkdjbUZ0WlNrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUdaeVlXMWxMbDl6WlhSRWVXNWhiV2xqUVhSc1lYTkdjbUZ0WlNod1lXTnJaV1JHY21GdFpTazdYSEpjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0I5WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJSDFjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdhV1lnS0dOdmJYQXVjMmhoY21Wa1RXRjBaWEpwWVd4eld6QmRMbWRsZEZCeWIzQmxjblI1S0NkMFpYaDBkWEpsSnlrZ0lUMDlJR1p5WVcxbExsOTBaWGgwZFhKbEtTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JqYjIxd0xsOWhZM1JwZG1GMFpVMWhkR1Z5YVdGc0tIUnlkV1VwTzF4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0I5WEhKY2JpQWdJQ0FnSUNBZ2ZWeHlYRzRnSUNBZ2ZTd2dYSEpjYmx4eVhHNGdJQ0FnWkdWc1pYUmxSbkp2YlVSNWJtRnRhV05CZEd4aGN5QW9ZMjl0Y0N3Z1puSmhiV1VwSUh0Y2NseHVJQ0FnSUNBZ0lDQnBaaUFvWm5KaGJXVWdKaVlnSVVORFgxUkZVMVFwSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tHWnlZVzFsTGw5dmNtbG5hVzVoYkNBbUppQmtlVzVoYldsalFYUnNZWE5OWVc1aFoyVnlLU0I3WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCa2VXNWhiV2xqUVhSc1lYTk5ZVzVoWjJWeUxtUmxiR1YwWlVGMGJHRnpWR1Y0ZEhWeVpTaG1jbUZ0WlNrN1hISmNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQm1jbUZ0WlM1ZmNtVnpaWFJFZVc1aGJXbGpRWFJzWVhOR2NtRnRaU2dwTzF4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0I5WEhKY2JpQWdJQ0FnSUNBZ2ZWeHlYRzRnSUNBZ2ZWeHlYRzU5SWwxOSJdfQ==